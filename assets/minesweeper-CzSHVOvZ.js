import{_ as S,c as o,b as r,w as p,v as w,e as N,t as m,F as c,f as b,o as d,n as k,g,h as q}from"./index-CRp-uh6n.js";class C{constructor(e,i){this.className=e,this.text=i,this.count=0}getClassName(){return this.className}getText(){return this.text}}const M={name:"minesweeper",methods:{initNeighbors(){let t=0;for(let e=0;e<this.width;e++)for(let i=0;i<this.height;i++){for(let l=e-1;l<e+2;l++)for(let s=i-1;s<i+2;s++)l>-1&&l<this.width&&s>-1&&s<this.height&&this.board[l][s].text==="X"&&this.board[e][i].count++;this.board[e][i].text!=="X"&&(this.board[e][i].text=this.board[e][i].count)}return t},initMines(t,e){let i=[],l=this.numberOfMines;for(;l>0;){const s=Math.floor(Math.random()*this.width),a=Math.floor(Math.random()*this.height);let n=!1;(s<t-1||s>t+1)&&(a<e-1||a>e+1)&&(n=!0);let h=s+","+a;!i.includes[h]&&n&&(i.push(h),l--)}for(let s=0;s<this.width;s++)for(let a=0;a<this.height;a++){let n=s+","+a;i.includes(n)&&(this.board[s][a].text="X")}console.log("this.minesRemaining after init",this.numberOfMines,i.length,i),console.log("this.board",this.board)},flagSquare(t,e){this.board[t][e].className==="unrevealed"?(this.board[t][e].className="flagged",this.flagsRemaining--):this.board[t][e].className==="flagged"&&(this.board[t][e].className="unrevealed",this.flagsRemaining++)},revealSquare(t,e){this.firstClick&&(this.firstClick=!1,this.initMines(t,e),this.initNeighbors()),!(t<0||t>this.width-1||e<0||e>this.height-1)&&this.board[t][e].className==="unrevealed"&&(this.board[t][e].text==="X"?(this.board[t][e].className="mine",this.revealAll(),alert("Game over")):(this.squaresClicked++,this.board[t][e].text>0?this.board[t][e].className="hint":this.board[t][e].text===0&&(this.board[t][e].className="hint",this.revealSquare(t-1,e-1),this.revealSquare(t-1,e),this.revealSquare(t-1,e+1),this.revealSquare(t,e-1),this.revealSquare(t,e+1),this.revealSquare(t+1,e-1),this.revealSquare(t+1,e),this.revealSquare(t+1,e+1)),this.squaresClicked===this.winCondition&&(this.revealAll(),alert("You Won!"))))},initBoard(){this.board=[],this.flagsRemaining=this.numberOfMines,this.firstClick=!0,this.squaresClicked=0,this.flagsRemaining=this.numberOfMines;for(let t=0;t<this.width;t++){let e=[];for(let i=0;i<this.height;i++){let l=new C("unrevealed","");e.push(l)}this.board.push(e)}},revealAll(){for(let t=0;t<this.width;t++)for(let e=0;e<this.height;e++)this.board[t][e].text==="X"&&(this.board[t][e].className="mine")}},mounted:function(){this.initBoard()},data(){return{width:9,height:9,numberOfMines:10,flagsRemaining:0,board:[],firstClick:!0,squaresClicked:0,boardSize:"easy"}},watch:{boardSize:function(){this.boardSize==="easy"?(this.width=9,this.height=9,this.numberOfMines=10,d3.select("#board").attr("class","small")):this.boardSize==="medium"?(this.width=16,this.height=16,this.numberOfMines=40,d3.select("#board").attr("class","medium")):this.boardSize==="hard"&&(this.width=16,this.height=30,this.numberOfMines=99,d3.select("#board").attr("class","hard")),this.initBoard()}},computed:{winCondition(){return this.width*this.height-this.numberOfMines}}},O={id:"game"},z={style:{color:"blueviolet"}},B={id:"board",class:"small"},R=["onClick","onContextmenu"],_={key:0};function X(t,e,i,l,s,a){return d(),o("div",O,[r("div",null,[e[3]||(e[3]=r("label",{for:"difficulty"},"Select a difficulty:",-1)),p(r("select",{id:"difficulty","onUpdate:modelValue":e[0]||(e[0]=n=>s.boardSize=n),hint:"Select difficulty"},e[2]||(e[2]=[r("option",{value:"easy"},"easy",-1),r("option",{value:"medium"},"medium",-1),r("option",{value:"hard"},"hard",-1)]),512),[[w,s.boardSize]]),r("button",{style:{"margin-left":"25px"},onClick:e[1]||(e[1]=(...n)=>a.initBoard&&a.initBoard(...n))},"reset")]),e[5]||(e[5]=r("strong",null," Click to reveal, right click to flag ",-1)),r("div",null,[r("div",null,[e[4]||(e[4]=N("Flags remaining: ")),r("span",z,m(s.flagsRemaining),1)])]),r("table",B,[(d(!0),o(c,null,b(s.board,(n,h)=>(d(),o("tr",{key:h},[(d(!0),o(c,null,b(n,(u,f)=>(d(),o("td",{key:f,oncontextmenu:"return false;",onClick:g(v=>a.revealSquare(h,f),["left"]),onContextmenu:g(v=>a.flagSquare(h,f),["right"]),class:k(u.className)},[u.className!=="unrevealed"&&u.className!=="flagged"?(d(),o("span",_,m(u.text),1)):q("",!0)],42,R))),128))]))),128))])])}const V=S(M,[["render",X]]);export{V as default};
